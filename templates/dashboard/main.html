{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="main-panel">
  <div class="content-wrapper">
    <div class="row">
      <div class="col-md-6 col-xl-4 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <div class="d-flex flex-row justify-content-between">
              <h4 class="card-title">Сообщения</h4>
              <p class="text-muted mb-1 small">Открыть все</p>
            </div>
            <div class="preview-list">
              <div class="preview-item border-bottom">
                <div class="preview-thumbnail">
                  <img src="{% static 'assets/images/faces/face6.jpg' %}" alt="image" class="rounded-circle">
                </div>
                <div class="preview-item-content d-flex flex-grow">
                  <div class="flex-grow">
                    <div class="d-flex d-md-block d-xl-flex justify-content-between">
                      <h6 class="preview-subject">Leonard</h6>
                      <p class="text-muted text-small">5 minutes ago</p>
                    </div>
                    <p class="text-muted">Well, it seems to be working now.</p>
                  </div>
                </div>
              </div>
              <div class="preview-item border-bottom">
                <div class="preview-thumbnail">
                  <img src="{% static 'assets/images/faces/face8.jpg' %}" alt="image" class="rounded-circle">
                </div>
                <div class="preview-item-content d-flex flex-grow">
                  <div class="flex-grow">
                    <div class="d-flex d-md-block d-xl-flex justify-content-between">
                      <h6 class="preview-subject">Luella Mills</h6>
                      <p class="text-muted text-small">10 Minutes Ago</p>
                    </div>
                    <p class="text-muted">Well, it seems to be working now.</p>
                  </div>
                </div>
              </div>
              <div class="preview-item border-bottom">
                <div class="preview-thumbnail">
                  <img src="{% static 'assets/images/faces/face9.jpg' %}" alt="image" class="rounded-circle">
                </div>
                <div class="preview-item-content d-flex flex-grow">
                  <div class="flex-grow">
                    <div class="d-flex d-md-block d-xl-flex justify-content-between">
                      <h6 class="preview-subject">Ethel Kelly</h6>
                      <p class="text-muted text-small">2 Hours Ago</p>
                    </div>
                    <p class="text-muted">Please review the tickets</p>
                  </div>
                </div>
              </div>
              <div class="preview-item border-bottom">
                <div class="preview-thumbnail">
                  <img src="{% static 'assets/images/faces/face11.jpg' %}" alt="image" class="rounded-circle">
                </div>
                <div class="preview-item-content d-flex flex-grow">
                  <div class="flex-grow">
                    <div class="d-flex d-md-block d-xl-flex justify-content-between">
                      <h6 class="preview-subject">Herman May</h6>
                      <p class="text-muted text-small">4 Hours Ago</p>
                    </div>
                    <p class="text-muted">Thanks a lot. It was easy to fix it .</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-xl-4 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Ваши обзоры</h4>
            <div class="owl-carousel owl-theme full-width owl-carousel-dash portfolio-carousel owl-loaded owl-drag" id="owl-carousel-basic">
            <div class="owl-stage-outer"><div class="owl-stage" style="transform: translate3d(-1026px, 0px, 0px); transition: all 0.25s ease 0s; width: 2394px;">
              {% for picture in pictures %}
              <div class="owl-item" style="width: 332px; margin-right: 10px;">
                <div class="item">
                  <img src="{{ picture.image.url }}" alt="">
                </div>
              </div>
              {% endfor %}
              </div></div><div class="owl-nav"><button type="button" role="presentation" class="owl-prev"><i class="mdi mdi-chevron-left"></i></button><button type="button" role="presentation" class="owl-next"><i class="mdi mdi-chevron-right"></i></button></div><div class="owl-dots disabled"></div></div>
            <div class="d-flex py-4">
              <div class="preview-list w-100">
                <div class="preview-item p-0">
                  <div class="preview-thumbnail">
                    <img src="{{ request.user.avatar.url }}" class="rounded-circle" alt="" style="object-fit: cover;">
                  </div>
                  <div class="preview-item-content d-flex flex-grow">
                    <div class="flex-grow">
                      <div class="d-flex d-md-block d-xl-flex justify-content-between">
                        <h6 class="preview-subject">{{ request.user.name }}</h6>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12 col-xl-4 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Задачи</h4>
            <form method="post" class="add-items d-flex">
              {% csrf_token %}
              {{ form.text }}
              <button class="add btn btn-primary todo-list-add-btn" type="submit">Добавить</button>
            </form>
            <div class="list-wrapper">
              <ul class="d-flex flex-column-reverse text-white todo-list todo-list-custom">
                {% for todo in todos %}
                <li {% if todo.completed %} class="completed" {% endif %}>
                    <div class="form-check form-check-primary">
                      <label class="form-check-label">
                      {{ todo.text }}</label>
                    </div>
                    <form action="" method="post" class="remove">
                      {% csrf_token %}
                      <input type="hidden" value="{{ todo.id }}" name="delete">
                      <button type="submit" style="border: none; background: none; margin: 0; padding: 0; color: grey;"><i class="mdi mdi-close-box"></i></button>
                    </form>
                  </li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <div class="d-flex flex-row justify-content-between">
              <h4 class="card-title mb-1">Вакансии</h4>
              <p class="text-muted mb-1">5 ваших последних вакансий</p>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="preview-list">
                  {% for vacancy in vacancies %}
                  <div class="preview-item border-bottom">
                    <div class="preview-thumbnail">
                      <div class="preview-icon bg-primary">
                        <i class="mdi mdi-briefcase"></i>
                      </div>
                    </div>
                    <div class="preview-item-content d-sm-flex flex-grow">
                      <div class="flex-grow">
                        <h6 class="preview-subject">{{ vacancy.title|truncatewords:3 }}</h6>
                        <p class="text-muted mb-0">{{ vacancy.description|truncatewords:3 }}</p>
                      </div>
                      <div class="me-auto text-sm-right pt-2 pt-sm-0">
                        <p class="text-muted">{{ vacancy.created|timesince }} назад</p>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-8 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <div class="d-flex flex-row justify-content-between">
              <h4 class="card-title mb-1">Отчёты</h4>
              <p class="text-muted mb-1">5 ваших последних отчётов</p>
            </div>
            <div class="row">
              <div class="col-12">
                <div class="preview-list">
                  {% for report in reports %}
                  <div class="preview-item border-bottom">
                    <div class="preview-thumbnail">
                      <div class="preview-icon bg-danger">
                        <i class="mdi mdi-file-document"></i>
                      </div>
                    </div>
                    <div class="preview-item-content d-sm-flex flex-grow">
                      <div class="flex-grow">
                        <h6 class="preview-subject">{{ report.text }}</h6>
                        <p class="text-muted mb-0">{{ report.get_description_display }}</p>
                      </div>
                      <div class="me-auto text-sm-right pt-2 pt-sm-0">
                        <p class="text-muted">{{ report.amount }} сом</p>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="row ">
      <div class="col-12 grid-margin">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Статус заказов</h4>
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th> Имя клиента </th>
                    <th> Номер заказа </th>
                    <th> Наименование товара </th>
                    <th> Количество </th>
                    <th> Стоимость </th>
                    <th> Цена итого </th>
                  </tr>
                </thead>
                <tbody>
                  {% for order in orders %}
                  <tr>
                    <td>
                      <img src="https://yt3.ggpht.com/a/AGF-l78AzseOtv4fYGdmRtS7CtaL4wJZLKuFwsi54g=s900-c-k-c0xffffffff-no-rj-mo" alt="image">
                      <span class="ps-2">{{ order.consumer }}</span>
                    </td>
                    <td> {{ order.id }} </td>
                    <td> {{ order.product_name }} </td>
                    <td> {{ order.count }} шт</td>
                    <td> {{ order.amount }} сом</td>
                    <td> {{ order.get_amount_total }} сом</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>


  </div>
  <!-- content-wrapper ends -->
  <!-- partial:partials/_footer.html -->
  {% include 'includes/footer.html' %}
  <!-- partial -->
</div>
{% endblock %}